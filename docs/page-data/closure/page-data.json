{
  "componentChunkName": "component---src-templates-blog-post-js",
  "path": "/closure/",
  "webpackCompilationHash": "5cd3159415788e5e5463",
  "result": {
    "data": {
      "site": {
        "siteMetadata": { "title": "CHEATSHEET", "author": "Amal Jose A" }
      },
      "markdownRemark": {
        "id": "4c53e356-9cf1-5939-b352-e3daff9483c3",
        "excerpt": "Basics Closure = Function + Function’s lexical environment Closure created every time function created To use a closure, define a function…",
        "html": "<hr>\n<h3>Basics</h3>\n<ul>\n<li>Closure = Function + Function’s lexical environment</li>\n<li>Closure created every time function created</li>\n<li>To use a closure, define a function inside another function and expose it. To expose a function, return it or pass it to another function.</li>\n</ul>\n<hr>\n<h3>Some examples of closure</h3>\n<h4>Example 1</h4>\n<ul>\n<li>A simple case where closure is in action, but not noticed</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Mozilla'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// name is a local variable created by init</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">displayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// displayName() is the inner function, a closure</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Output - Mozilla</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">displayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Here the the displayName function is able to access <code class=\"language-text\">name</code> because of closure</li>\n</ul>\n<h4>Example 2</h4>\n<ul>\n<li>Another example where we can see the closure</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeCard</span> <span class=\"token operator\">=</span> message <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'&lt;---- Happy '</span> <span class=\"token operator\">+</span> message <span class=\"token operator\">+</span> <span class=\"token string\">' ---->'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//--------------------</span>\n<span class=\"token keyword\">const</span> makeChristmasCard <span class=\"token operator\">=</span> <span class=\"token function\">makeCard</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Christmas'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> makeNewYearCard <span class=\"token operator\">=</span> <span class=\"token function\">makeCard</span><span class=\"token punctuation\">(</span><span class=\"token string\">'New Year'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//--------------------</span>\n<span class=\"token function\">makeChristmasCard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//returns - &lt;---- Happy Christmas ----></span>\n<span class=\"token function\">makeNewYearCard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//returns - &lt;---- Happy New Year ----></span></code></pre></div>\n<ul>\n<li>Here the makeChristmasCard access the <code class=\"language-text\">message</code> from closure</li>\n<li>We can see the closure by console makeChristmasCard</li>\n</ul>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc1bc2fbcf0ee74466352b425643f863/16dee/console.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 562px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.032028469750884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdy5YwD/xAAXEAADAQAAAAAAAAAAAAAAAAAAEBFB/9oACAEBAAEFAtUpF//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAQADAAMAAAAAAAAAAAAAAAEAESEQQVH/2gAIAQEAAT8hUNMK64othT2VP//aAAwDAQACAAMAAAAQlw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEBAAIDAQAAAAAAAAAAAAABABFxMVGBof/aAAgBAQABPxBIB7JHSDEuI+wDAg3GByu2/9k='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"makeChristmasCard console\"\n        title=\"\"\n        src=\"/static/cc1bc2fbcf0ee74466352b425643f863/16dee/console.jpg\"\n        srcset=\"/static/cc1bc2fbcf0ee74466352b425643f863/99d47/console.jpg 148w,\n/static/cc1bc2fbcf0ee74466352b425643f863/e41a5/console.jpg 295w,\n/static/cc1bc2fbcf0ee74466352b425643f863/16dee/console.jpg 562w\"\n        sizes=\"(max-width: 562px) 100vw, 562px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3>Common use cases of closure</h3>\n<h4>1. Data privacy</h4>\n<ul>\n<li>Closures are commonly used to give objects data privacy</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">privateFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'Private value'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">publicFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">privateFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> publicFunction <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\na<span class=\"token punctuation\">.</span><span class=\"token function\">publicFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//returns - Private value</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f184857a9ad0e693acb53821a7d8f4c7/c4410/diagram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 412px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 109.70873786407766%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQ4y41VDY+qMBD0//85ozHxXV7ORM2BF0C+KbSFfTOV8pDIeU02BWmnszPddSOLMQzDNFdV5aKuaxdFUUin9fTdx3zfZg2w6zrJ89yBMEoEQfP7XUzbcuFLEquALTYVeSFJkkgQBBJ8BZJlmWRxLB3AbavEKCVD3/+OoU+5aRrRRiPVTsqyfEq5N0Z0XUlvzTrDOahLve0kjL4kSSOwGQ8jq9nBBPVMf2RIzZi6IRMwI2PPcL6WTC11fWdKmqZyhwnUkXMGk6ihxkGDtf/3gJ2BNG8BCeIMCUIJw1BiAOc4hIA0hKy4ugd43z2e35pCYAPRLcJJgHc/egAqMDt9fsrfjw85Hv+8N0V3WqL0W9L8Pl09pmgZ1BeakqFu6nWGHlAhLV8pnHltaBDH9XodWR3lHkciyGD4TaXQZd5FvvMAVo1fY/Hu53406a3L5/NZLpeLm2M4TKZM1zvL9d5hd7HnRT6PHhvIhuwsNRorhek7VmBuoZ/FwXY0arVS5sMYK0keSVHnOGR4cpgu9a16Wr/xgvuZQd2oF4MMy6pwwecK60p2IcjBKNEwav7OOgfTDUvK3TW4x25Cvbbbrex2O9nv93K73US1jTSqduXHUNiscLCCJHosS2JQmqeUyY4fCXo4HB6MS5pgXExlhmbgHV6OzfzekaVvWTTgdDq58jNWu3B9Mksf3YX7Fp37yZR5dfhBDXkXWc90XBMMB74q04nh8sPyv4IjiiIH/KqalkRWS2/qddCMafv79xMYxz8RM7w1peA6kQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Diagram closure\"\n        title=\"\"\n        src=\"/static/f184857a9ad0e693acb53821a7d8f4c7/c4410/diagram.png\"\n        srcset=\"/static/f184857a9ad0e693acb53821a7d8f4c7/77b54/diagram.png 148w,\n/static/f184857a9ad0e693acb53821a7d8f4c7/ccd51/diagram.png 295w,\n/static/f184857a9ad0e693acb53821a7d8f4c7/c4410/diagram.png 412w\"\n        sizes=\"(max-width: 412px) 100vw, 412px\"\n      />\n  </span>\n  </a></p>\n<ul>\n<li>Here the Private value is only accessable through by calling a.publicFunction(), which calls privateFunction which exists in closure</li>\n</ul>\n<h4>2. Callback functions</h4>\n<ul>\n<li>Closures are frequently used to store extra information in callback functions inside event listners, timers etc</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">initButtons</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\n    button<span class=\"token punctuation\">,</span>\n    i<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    button<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Button '</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">;</span>\n    button<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> e <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">initButtons</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>Here <code class=\"language-text\">alert(i)</code> is excecuted when the event listener is fired</p>\n<style type=\"text/css\">\n.tg  {border-collapse:collapse;border-spacing:0;}\n.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}\n.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}\n.tg .tg-0lax{text-align:left;vertical-align:top}\n.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}\n.table-container {width: 100%;overflow: scroll;}\n\n</style>\n<div class=\"table-container\">\n<table class=\"tg\">\n<tr>\n  <th class=\"tg-0lax\"><span style=\"font-weight:bold\">innerHTML</span></th>\n  <th class=\"tg-0lax\"><span style=\"font-weight:bold\">Event listner</span></th>\n  <th class=\"tg-0lax\"><span style=\"font-weight:bold\">Closure</span></th>\n</tr>\n<tr>\n  <td class=\"tg-0pky\">Button 0</td>\n  <td class=\"tg-0pky\">addEventListener(\"click\", (e)=&gt;alert(i));</td>\n  <td class=\"tg-0pky\">{i:0}</td>\n</tr>\n<tr>\n  <td class=\"tg-0pky\">Button 1</td>\n  <td class=\"tg-0pky\">addEventListener(\"click\", (e)=&gt;alert(i));</td>\n  <td class=\"tg-0pky\">{i:1}</td>\n</tr>\n<tr>\n  <td class=\"tg-0pky\">Button 2</td>\n  <td class=\"tg-0pky\">addEventListener(\"click\", (e)=&gt;alert(i));</td>\n  <td class=\"tg-0pky\">{i:2}</td>\n</tr>\n<tr>\n  <td class=\"tg-0pky\">Button 3</td>\n  <td class=\"tg-0pky\">addEventListener(\"click\", (e)=&gt;alert(i));</td>\n  <td class=\"tg-0pky\">{i:3}</td>\n</tr>\n</table>\n</pre>\n</li>\n<li>\n<p>The value of <code class=\"language-text\">i</code> is stored in closure</p>\n</li>\n</ul>\n<hr>\n<h3>Reference</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/19668562/10041165\">https://stackoverflow.com/a/19668562/10041165</a></li>\n<li><a href=\"https://stackoverflow.com/a/2728341/10041165\">https://stackoverflow.com/a/2728341/10041165</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures</a></li>\n</ul>",
        "fields": { "readingTime": { "text": "3 min read" } },
        "frontmatter": { "title": "Closures", "date": "January 11, 2020" }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/closure/",
      "previous": {
        "fields": { "slug": "/how-jest-mock-works/" },
        "frontmatter": { "title": "How jest.mock() works" }
      },
      "next": null
    }
  }
}
